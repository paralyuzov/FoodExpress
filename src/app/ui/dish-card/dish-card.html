@if(dish(); as dishData) {
<div
  class="group bg-neutral-800/50 backdrop-blur-sm rounded-2xl overflow-hidden shadow-xl border border-neutral-700/50 hover:border-amber-400/30 transform  transition-all duration-300 hover:shadow-2xl hover:shadow-amber-500/10 hover:saturate-150"
>
  <div class="relative overflow-hidden">
    <img
      [src]="
        dishData.imageUrl ||
        'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400&h=300&fit=crop'
      "
      [alt]="dishData.name"
      class="w-full h-56 object-cover group-hover:scale-110 transition-transform duration-500"
    />
    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>

    <div class="absolute top-4 left-4">
      @if (dishData.isAvailable) {
      <div
        class="flex items-center gap-2 bg-green-500/90 backdrop-blur-sm text-white text-xs px-3 py-1.5 rounded-full font-semibold"
      >
        <div class="w-2 h-2 bg-white rounded-full"></div>
        Available
      </div>
      } @else {
      <div
        class="flex items-center gap-2 bg-red-500/90 backdrop-blur-sm text-white text-xs px-3 py-1.5 rounded-full font-semibold"
      >
        <div class="w-2 h-2 bg-white rounded-full"></div>
        Unavailable
      </div>
      }
    </div>

    <div class="absolute top-4 right-4">
      <div
        class="bg-gradient-to-r from-amber-400 to-yellow-500 text-neutral-900 text-lg font-bold px-3 py-1.5 rounded-full shadow-lg"
      >
        ${{ dishData.price | number : '1.2-2' }}
      </div>
    </div>

    @if (dishData.avgRating) {
    <div class="absolute bottom-4 left-4">
      <div
        class="flex items-center gap-1 bg-black/60 backdrop-blur-sm text-white text-sm px-3 py-1.5 rounded-full"
      >
        <i class="pi pi-star-fill text-amber-400 text-xs"></i>
        <span class="font-semibold">{{ dishData.avgRating | number : '1.1-1' }}</span>
      </div>
    </div>
    }
  </div>

  <div class="p-6">
    @if (dishData.menu?.restaurant?.name) {
    <div class="flex items-center gap-2 mb-2">
      <i class="pi pi-map-marker text-amber-400 text-sm"></i>
      <a
        [routerLink]="['/restaurants', dishData.menu?.restaurant?.id]"
        class="text-neutral-400 hover:text-amber-400 text-sm font-medium transition-colors duration-200 cursor-pointer"
      >
        {{ dishData.menu?.restaurant?.name }}
      </a>
    </div>
    }
    <h3
      class="text-xl font-bold text-white font-pt-sans mb-3 group-hover:text-amber-300 transition-colors duration-200 line-clamp-1"
    >
      {{ dishData.name }}
    </h3>

    @if (dishData.description) {
    <p class="text-neutral-400 text-sm font-pt-sans mb-4 line-clamp-2 leading-relaxed">
      {{ dishData.description }}
    </p>
    }

    <div class="flex items-center justify-between mt-4">
      <div class="flex items-center gap-2">
        @if (isAuth()) {
        <p-rating
          [ngModel]="rateValue()"
          [iconOnStyle]="{ color: '#fcd34d' }"
          [iconOffStyle]="{ color: '#64748b' }"
          (onRate)="onRate($event, dishData.id)"
        />
        }
      </div>

      <button
        (click)="addToCart(dishData)"
        [disabled]="!dishData.isAvailable"
        class="group/btn relative overflow-hidden bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 disabled:from-neutral-600 disabled:to-neutral-700 text-neutral-900 disabled:text-neutral-400 font-bold px-5 py-2.5 rounded-xl transition-all duration-300 transform hover:scale-105 disabled:hover:scale-100 disabled:cursor-not-allowed shadow-lg hover:shadow-xl hover:cursor-pointer"
      >
        <span class="relative z-10 flex items-center gap-2">
          @if(dishData.isAvailable) {
          <i class="pi pi-cart-plus text-sm group-hover/btn:scale-110 transition-transform"></i>
          Add } @else {
          <i class="pi pi-times text-sm"></i>
          Unavailable }
        </span>
        @if(dishData.isAvailable) {
        <div
          class="absolute inset-0 bg-gradient-to-r from-white/20 to-transparent tranneutral-x-[-100%] group-hover/btn:tranneutral-x-[100%] transition-transform duration-500"
        ></div>
        }
      </button>
    </div>
  </div>
</div>
}
