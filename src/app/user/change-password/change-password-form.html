 <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="w-full flex flex-col gap-4 p-8">
    <div class="">
      <p-floatlabel variant="on">
        <p-password id="currentPassword" formControlName="currentPassword" [toggleMask]="true" [feedback]="false" fluid="true" autocomplete="on" class="w-full!" />
        <label class="text-amber-300!" for="currentPassword">Current Password</label>
      </p-floatlabel>
      @if(isInvalid('currentPassword')) {
      <p-message size="small" severity="error" variant="simple">{{
        getErrorMessage('currentPassword')
        }}</p-message>
      }
    </div>
    <div class="">
      <p-floatlabel variant="on">
        <p-password id="newPassword" formControlName="newPassword" [toggleMask]="true" [feedback]="true" fluid="true" autocomplete="off" class="w-full!" />
        <label class="text-amber-300!" for="newPassword">New Password</label>
      </p-floatlabel>
      @if(isInvalid('newPassword')) {
      <p-message size="small" severity="error" variant="simple">{{
        getErrorMessage('newPassword')
        }}</p-message>
      }
    </div>

      <div class="">
      <p-floatlabel variant="on">
        <p-password id="confirmNewPassword" formControlName="confirmNewPassword" [toggleMask]="true" [feedback]="false" fluid="true" autocomplete="off" class="w-full!" />
        <label class="text-amber-300!" for="confirmNewPassword">Confirm New Password</label>
      </p-floatlabel>
      @if(isInvalid('confirmNewPassword')) {
      <p-message size="small" severity="error" variant="simple">{{
        getErrorMessage('confirmNewPassword')
        }}</p-message>
      }
       @if(hasPasswordMismatch()) {
      <p-message size="small" severity="error" variant="simple">{{
        getFormError()
        }}</p-message>
      }

    </div>
    <button type="submit" [disabled]="!canSubmit()"
      class="w-full bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-[1.02] disabled:scale-100 shadow-lg">
      @if (isLoading()) {
      <div class="flex items-center justify-center space-x-2">
        <div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
        <span>Loading...</span>
      </div>
      } @else { Update }
    </button>
  </form>
